setwd("~/Desktop/Github/PN_treebuilding/R")
dirs <- as.character(sapply(list.files("../biphone_binary"), function (i) paste("../biphone_binary", i, "xml", sep = "/")))
xml_files <- unlist(sapply(dirs, function (i) list.files(i, full.names = TRUE)))
c(130:132, 766:769, 874:891,1366,1445,1464)
xml_files
update_xml_again <- function (file) {
xml = readLines(file)
xml <- xml[-c(130:132, 766:769, 874:891,1366,1445,1464)]
xml <- gsub("07-23", "08-31", xml)
writeLines(xml, file)
}
sapply(xml_files, update_xml_again)
update_xml_date <- function (file) {
xml = readLines(file)
xml <- gsub("07-23", "08-31", xml)
writeLines(xml, file)
}
sapply(xml_files, update_xml_again)
update_xml_date <- function (file) {
xml = readLines(file)
xml <- gsub("07-23", "08-31", xml)
writeLines(xml, file)
}
sapply(xml_files, update_xml_date)
?grep
xml = readLines(xml_files[1])
grepl("\t\t<coalescentSimulator>\n\t\t\t<taxa idref="Arandic"/>\n\t\t\t<constantSize idref="initialDemo"/>\n\t\t</coalescentSimulator>")
grepl('\t\t<coalescentSimulator>\n\t\t\t<taxa idref="Arandic"/>\n\t\t\t<constantSize idref="initialDemo"/>\n\t\t</coalescentSimulator>')
grepl('\t\t<coalescentSimulator>\n\t\t\t<taxa idref="Arandic"/>\n\t\t\t<constantSize idref="initialDemo"/>\n\t\t</coalescentSimulator>', xml)
grep('\t\t<coalescentSimulator>\n\t\t\t<taxa idref="Arandic"/>\n\t\t\t<constantSize idref="initialDemo"/>\n\t\t</coalescentSimulator>', xml)
grep('<taxa idref="Arandic"/>', xml)
grep('<taxa idref="Arandic"/>', xml)[1]
c((grep('<taxa idref="Arandic"/>', xml)[1] -1):(grep('<taxa idref="Arandic"/>', xml)[1] +2))
grep('<tmrcaStatistic id\="tmrca\(Arandic\)"', xml)
grep('<tmrcaStatistic id\\="tmrca\\(Arandic\\)"', xml)
891-874
874:(874+17)
xml[c(grep('<tmrcaStatistic id\\="tmrca\\(Arandic\\)"', xml):(grep('<tmrcaStatistic id\\="tmrca\\(Arandic\\)"', xml) + 17))]
grep('<monophylyStatistic idref="monophyly(Arandic)"/>')
grep('<monophylyStatistic idref="monophyly(Arandic)"/>', xml)
grep('<monophylyStatistic idref\\="monophyly\\(Arandic\\)"/>', xml)
xml[grep('<tmrcaStatistic idref\\="tmrca\\(Arandic\\)"/>')]
xml[grep('<tmrcaStatistic idref\\="tmrca\\(Arandic\\)"/>', xml)]
xml[-grep('<tmrcaStatistic idref\\="tmrca\\(Arandic\\)"/>', xml)]
grep('<tmrcaStatistic idref\\="age\\(Arandic\\)"/>', xml)
remove_arandic <- function (file) {
xml = readLines(file)
xml <- xml[-130:132]
xml <- xml[-c((grep('<taxa idref="Arandic"/>', xml)[1] -1):(grep('<taxa idref="Arandic"/>', xml)[1] +2))]
xml <- xml[-c(grep('<tmrcaStatistic id\\="tmrca\\(Arandic\\)"', xml):(grep('<tmrcaStatistic id\\="tmrca\\(Arandic\\)"', xml) + 17))]
xml <- xml[-grep('<monophylyStatistic idref\\="monophyly\\(Arandic\\)"/>', xml)]
xml <- xml[-grep('<tmrcaStatistic idref\\="tmrca\\(Arandic\\)"/>', xml)]
xml <- xml[-grep('<tmrcaStatistic idref\\="age\\(Arandic\\)"/>', xml)]
}
sapply(xml_files, remove_arandic)
remove_arandic <- function (file) {
xml = readLines(file)
xml <- xml[-c(130:132)]
xml <- xml[-c((grep('<taxa idref="Arandic"/>', xml)[1] -1):(grep('<taxa idref="Arandic"/>', xml)[1] +2))]
xml <- xml[-c(grep('<tmrcaStatistic id\\="tmrca\\(Arandic\\)"', xml):(grep('<tmrcaStatistic id\\="tmrca\\(Arandic\\)"', xml) + 17))]
xml <- xml[-grep('<monophylyStatistic idref\\="monophyly\\(Arandic\\)"/>', xml)]
xml <- xml[-grep('<tmrcaStatistic idref\\="tmrca\\(Arandic\\)"/>', xml)]
xml <- xml[-grep('<tmrcaStatistic idref\\="age\\(Arandic\\)"/>', xml)]
}
sapply(xml_files, remove_arandic)
remove_arandic <- function (file) {
xml = readLines(file)
xml <- xml[-c(130:132)]
xml <- xml[-c((grep('<taxa idref="Arandic"/>', xml)[1] -1):(grep('<taxa idref="Arandic"/>', xml)[1] +2))]
xml <- xml[-c(grep('<tmrcaStatistic id\\="tmrca\\(Arandic\\)"', xml):(grep('<tmrcaStatistic id\\="tmrca\\(Arandic\\)"', xml) + 17))]
xml <- xml[-grep('<monophylyStatistic idref\\="monophyly\\(Arandic\\)"/>', xml)]
xml <- xml[-grep('<tmrcaStatistic idref\\="tmrca\\(Arandic\\)"/>', xml)]
xml <- xml[-grep('<tmrcaStatistic idref\\="age\\(Arandic\\)"/>', xml)]
writeLines(xml, file)
}
sapply(xml_files, remove_arandic)
